---
// Reading/page progress bar at top of page
---

<div id="progress-bar" class="fixed top-0 left-0 h-[3px] bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-500 z-[9999] transition-[width] duration-150 ease-out" style="width:0%"></div>

<script is:inline>
(function() {
  function initProgressBar() {
    var bar = document.getElementById('progress-bar');
    if (!bar) return;

    function updateProgress() {
      var scrollTop = window.scrollY;
      var docHeight = document.documentElement.scrollHeight - window.innerHeight;
      if (docHeight > 0) {
        var pct = Math.min((scrollTop / docHeight) * 100, 100);
        bar.style.width = pct + '%';
      }
    }

    window.addEventListener('scroll', updateProgress, { passive: true });
    updateProgress();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initProgressBar);
  } else {
    initProgressBar();
  }
  document.addEventListener('astro:page-load', initProgressBar);
})();
</script>
